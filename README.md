# spring-gift-wishlist

## API 명세

| HTTP Method | Endpoint         | 설명             | Request Body | Response  |
|-------------|------------------|----------------|-----------|-----------|
| POST | `/products`      | 상품 생성          | `{"name": "상품명", "price": 10000, "imageUrl": "https://example.com/image.jpg"}` | 생성된 상품 id |
| GET | `/products`      | 전체 상품 조회       |  | 상품 목록     |
| GET | `/products/{id}` | 특정 상품 조회       |  | 상품 상세 정보  |
| PUT | `/products/{id}` | 상품 수정          | `{"name": "수정된 상품명", "price": 15000, "imageUrl": "https://example.com/updated-image.jpg"}` | 수정된 상품 정보 |
| DELETE | `/products/{id}` | 상품 삭제          |  | 삭제 완료 메시지 |

## ✅ 요구사항 체크리스트

### [✔️] API 기능 (CRUD)
- [X] 상품 생성 기능
- [X] 전체 상품 조회 기능
- [X] 단건 상품 조회 기능
- [X] 상품 수정 기능
- [X] 상품 삭제 기능

### [✔️] 관리자 페이지 (Thymeleaf 기반)
- [X] 관리자 기초 페이지 구현
- [X] 상품 목록 조회 기능 연동
- [X] 상품 생성 기능 연동
- [X] 상품 수정 기능 연동
- [X] 상품 삭제 기능 연동

### [✔️] DB 마이그레이션 (HashMap -> h2)
- [X] h2 연결 및 목업 데이터 추가
- [X] jdbctemplate 메서드로 기존 코드 리팩토링
    - [X] 게시글 조회
    - [X] 게시글 생성
    - [X] 게시글 수정
    - [X] 게시글 삭제
- [X] validation 추가
- [X] db 초기화 및 목업데이터 삽입 로직 위치 변경 (service -> schema/data.sql)
- [X] Item 객체 사용으로 변경
- [X] Optional로 NPE 대응
- [X] Repository 계층 구현
- [X] 서비스와 리포지토리의 분리


### [✔️] 상품명 유효성 검사
- [X] '카카오' 문구포함 검증 기능
- [X] 클라이언트가 어떤 오류인지 인식하게 설정하기

### [✔️] 로그인 기능
- [X] 아이템 생성자 팩토리 메서드화
- [X] 유저 엔티티 생성 + 디비 초기화 로직에 반영
- [X] 회원가입 기능
  - [X] 비밀번호 단방향 암호화
- [X] 로그인 기능
- [X] 아이템 기능에 유저 반영
    - [X] 스키마에 작성자 FK 추가
    - [X] 인터셉터에서 토큰을 받아 유저 정보를 얻는 기능
    - [X] 상품 서비스 함수에 인가 로직 반영
- [X] E2E 테스트에 로그인 유저 기능 반영하기


### [✔️] 위시리스트 기능
- [X] 위시리스트 엔티티 생성 + 디비 초기화 로직 반영
- [X] 위시리스트 레포지토리 구현
- [X] 위시리스트 기능 구현 (매 기능마다 e2e 테스트 작성)
  - [X] 내 위시리스트 조회
  - [X] 위시상품 추가
  - [X] 위시상품 삭제


### [✔️] JPA 고도화
- [X] 유저 엔티티 변경
- [X] 유저 리포 변경 및 서비스 반영
- [X] 아이템 엔티티 변경
- [X] 아이템 리포 변경 및 서비스 반영
- [X] 위시 엔티티 변경
- [X] 위시 리포 변경 및 서비스 반영
    - [X] 수량변경 기능 리팩토링
    - [X] 삭제 기능 리팩토링

### [✔️] 페이지네이션 도입
- [X] 아이템 목록 페이지네이션 구현
- [X] 위시리스트 페이지네이션 구현

### [✔️] 옵션 도입
- [X] 옵션 엔티티 구현
- [X] 옵션 조회
- [X] 옵션 추가

### [ ] 주문하기 기능
- [X] 카카오 api로 토큰 얻기
- [ ] step1 피드백 반영
  - [ ] 외부 API 커스텀 예외 처리 
  - [X] Client 추상화
  - [ ] 테스트 코드 작성
- [ ] 주문(옵션, 수량, 메시지를 body로) 시 해당 상품 옵션의 수량 차감
  - [ ] 수량이 0이였다면 주문 불가 
  - [ ] 주문상품이 주문자의 위시목록에 있다면 삭제처리
  - [ ] 나에게 보내기 API 적용 
